<aside 
  class="fixed top-0 left-0 z-40 w-64 h-screen pt-16 transition-transform bg-white border-r border-gray-200 dark:bg-gray-800 dark:border-gray-700 dark-transition"
  [class.transform-none]="isOpen"
  [class.-translate-x-full]="!isOpen"
>
  <div class="h-full px-3 py-4 overflow-y-auto flex flex-col">
    <!-- Logo Area -->
    <div class="flex items-center justify-center mb-5">
      
      <img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.pngplay.com%2Fwp-content%2Fuploads%2F6%2FFleet-Logo-PNG-Clipart-Background.png&f=1&nofb=1&ipt=4135bd6e69e32b3d03d2f309af9b8cf99bb29bf55f23929b9a5247fc88f428cc" alt="Fleet Manager Logo" class="h-10" />
      <p   class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">SNCFT Parc Auto </p>
    </div>
    
    <!-- Navigation Menu -->
    <ul class="space-y-2 flex-1">
      <ng-container *ngIf="authService.currentUserValue as user">
        <!-- Admin: show all options -->
        <ng-container *ngIf="user.role === 'admin'">
          <li>
            <a routerLink="/dashboard" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Car icon for Dashboard -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-red-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M3 13l2-2 7-7 7 7 2 2v7a2 2 0 01-2 2h-3a2 2 0 01-2-2v-2H9v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-7z"/>
                <circle cx="7.5" cy="18.5" r="1.5"/>
                <circle cx="16.5" cy="18.5" r="1.5"/>
              </svg>
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a routerLink="/users" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- User icon -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-blue-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 12c2.7 0 8 1.34 8 4v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2c0-2.66 5.3-4 8-4zm0-2a4 4 0 100-8 4 4 0 000 8z" />
              </svg>
              <span>Users</span>
            </a>
          </li>
          <li>
            <a routerLink="/drivers" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- User with steering wheel icon for Drivers -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-green-500" fill="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="7" r="4"/>
                <path d="M12 13c-4.418 0-8 1.79-8 4v2a2 2 0 002 2h12a2 2 0 002-2v-2c0-2.21-3.582-4-8-4zm0 2c3.314 0 6 1.343 6 3v1H6v-1c0-1.657 2.686-3 6-3z"/>
                <circle cx="12" cy="17" r="2"/>
              </svg>
              <span>Drivers</span>
            </a>
          </li>
          <li>
            <a routerLink="/vehicles" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Car icon for Vehicles -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-orange-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M3 13l2-5a2 2 0 011.89-1.37h9.42A2 2 0 0119 8l2 5v6a2 2 0 01-2 2h-1a2 2 0 01-2-2H8a2 2 0 01-2 2H5a2 2 0 01-2-2v-6z"/>
                <circle cx="7.5" cy="17.5" r="1.5"/>
                <circle cx="16.5" cy="17.5" r="1.5"/>
              </svg>
              <span>Vehicles</span>
            </a>
          </li>
          <li>
            <a routerLink="/missions" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Clipboard list icon for Missions -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-purple-500" fill="currentColor" viewBox="0 0 24 24">
                <rect x="4" y="4" width="16" height="16" rx="2"/>
                <rect x="8" y="2" width="8" height="4" rx="1"/>
                <rect x="8" y="8" width="8" height="2" rx="1"/>
                <rect x="8" y="12" width="8" height="2" rx="1"/>
                <rect x="8" y="16" width="8" height="2" rx="1"/>
              </svg>
              <span>Missions</span>
            </a>
          </li>
          <li>
            <a routerLink="/maintenance" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Settings (gear) icon for Maintenance -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-yellow-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19.14,12.94a7.07,7.07,0,0,0,.06-1,7.07,7.07,0,0,0-.06-1l2.11-1.65a.5.5,0,0,0,.12-.64l-2-3.46a.5.5,0,0,0-.61-.22l-2.49,1a7,7,0,0,0-1.73-1l-.38-2.65A.5.5,0,0,0,13,2H11a.5.5,0,0,0-.5.42l-.38,2.65a7,7,0,0,0-1.73,1l-2.49-1a.5.5,0,0,0-.61.22l-2,3.46a.5.5,0,0,0,.12.64L4.86,10a7.07,7.07,0,0,0-.06,1,7.07,7.07,0,0,0,.06,1l-2.11,1.65a.5.5,0,0,0-.12.64l2,3.46a.5.5,0,0,0,.61.22l2.49-1a7,7,0,0,0,1.73,1l.38,2.65A.5.5,0,0,0,11,22h2a.5.5,0,0,0,.5-.42l.38-2.65a7,7,0,0,0,1.73-1l2.49,1a.5.5,0,0,0,.61-.22l2-3.46a.5.5,0,0,0-.12-.64ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/>
              </svg>
              <span>Maintenance</span>
            </a>
          </li>
          <li>
            <a routerLink="/fuel" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Gas pump icon for Fuel Consumption -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-pink-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M16 3v1a1 1 0 001 1h1a1 1 0 011 1v13a2 2 0 01-2 2H6a2 2 0 01-2-2V5a1 1 0 011-1h1a1 1 0 001-1V3m0 0h6m-6 0a1 1 0 00-1 1v1m8-2a1 1 0 011 1v1m-1-2h-6" />
                <rect x="14" y="10" width="4" height="7" rx="1"/>
              </svg>
              <span>Fuel Consumption</span>
            </a>
          </li>
          <li>
            <a routerLink="/fuel-stock" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Oil drop icon for Fuel Stock -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-cyan-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 3.25C12 3.25 7 8.5 7 13a5 5 0 0010 0c0-4.5-5-9.75-5-9.75z" />
              </svg>
              <span>Fuel Stock</span>
            </a>
          </li>
          <li>
            <a routerLink="/reporting" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Bar chart icon for Reporting -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-indigo-500" fill="currentColor" viewBox="0 0 24 24">
                <rect x="3" y="13" width="4" height="8" rx="1"/>
                <rect x="9" y="9" width="4" height="12" rx="1"/>
                <rect x="15" y="5" width="4" height="16" rx="1"/>
              </svg>
              <span>Reporting</span>
            </a>
          </li>
        </ng-container>
        <!-- Park Manager: all except Users -->
        <ng-container *ngIf="user.role === 'park manager'">
          <li>
            <a routerLink="/dashboard" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Car icon for Dashboard -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-red-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M3 13l2-2 7-7 7 7 2 2v7a2 2 0 01-2 2h-3a2 2 0 01-2-2v-2H9v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-7z"/>
                <circle cx="7.5" cy="18.5" r="1.5"/>
                <circle cx="16.5" cy="18.5" r="1.5"/>
              </svg>
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a routerLink="/drivers" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- ID card icon for Drivers -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 7a2 2 0 012-2h10a2 2 0 012 2v10a2 2 0 01-2 2H7a2 2 0 01-2-2V7zm0 0V5a2 2 0 012-2h10a2 2 0 012 2v2" />
                <circle cx="12" cy="12" r="3" />
              </svg>
              <span>Drivers</span>
            </a>
          </li>
          <li>
            <a routerLink="/vehicles" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Car icon for Vehicles -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-orange-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M3 13l2-5a2 2 0 011.89-1.37h9.42A2 2 0 0119 8l2 5v6a2 2 0 01-2 2h-1a2 2 0 01-2-2H8a2 2 0 01-2 2H5a2 2 0 01-2-2v-6z"/>
                <circle cx="7.5" cy="17.5" r="1.5"/>
                <circle cx="16.5" cy="17.5" r="1.5"/>
              </svg>
              <span>Vehicles</span>
            </a>
          </li>
          <li>
            <a routerLink="/missions" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Clipboard list icon for Missions -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-purple-500" fill="currentColor" viewBox="0 0 24 24">
                <rect x="4" y="4" width="16" height="16" rx="2"/>
                <rect x="8" y="2" width="8" height="4" rx="1"/>
                <rect x="8" y="8" width="8" height="2" rx="1"/>
                <rect x="8" y="12" width="8" height="2" rx="1"/>
                <rect x="8" y="16" width="8" height="2" rx="1"/>
              </svg>
              <span>Missions</span>
            </a>
          </li>
          <li>
            <a routerLink="/maintenance" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Settings (gear) icon for Maintenance -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-yellow-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19.14,12.94a7.07,7.07,0,0,0,.06-1,7.07,7.07,0,0,0-.06-1l2.11-1.65a.5.5,0,0,0,.12-.64l-2-3.46a.5.5,0,0,0-.61-.22l-2.49,1a7,7,0,0,0-1.73-1l-.38-2.65A.5.5,0,0,0,13,2H11a.5.5,0,0,0-.5.42l-.38,2.65a7,7,0,0,0-1.73,1l-2.49-1a.5.5,0,0,0-.61.22l-2,3.46a.5.5,0,0,0,.12.64L4.86,10a7.07,7.07,0,0,0-.06,1,7.07,7.07,0,0,0,.06,1l-2.11,1.65a.5.5,0,0,0-.12.64l2,3.46a.5.5,0,0,0,.61.22l2.49-1a7,7,0,0,0,1.73,1l.38,2.65A.5.5,0,0,0,11,22h2a.5.5,0,0,0,.5-.42l.38-2.65a7,7,0,0,0,1.73-1l2.49,1a.5.5,0,0,0,.61-.22l2-3.46a.5.5,0,0,0-.12-.64ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/>
              </svg>
              <span>Maintenance</span>
            </a>
          </li>
          <li>
            <a routerLink="/fuel" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Gas pump icon for Fuel Consumption -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-pink-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M16 3v1a1 1 0 001 1h1a1 1 0 011 1v13a2 2 0 01-2 2H6a2 2 0 01-2-2V5a1 1 0 011-1h1a1 1 0 001-1V3m0 0h6m-6 0a1 1 0 00-1 1v1m8-2a1 1 0 011 1v1m-1-2h-6" />
                <rect x="14" y="10" width="4" height="7" rx="1"/>
              </svg>
              <span>Fuel Consumption</span>
            </a>
          </li>
          <li>
            <a routerLink="/fuel-stock" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Oil drop icon for Fuel Stock -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-cyan-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 3.25C12 3.25 7 8.5 7 13a5 5 0 0010 0c0-4.5-5-9.75-5-9.75z" />
              </svg>
              <span>Fuel Stock</span>
            </a>
          </li>
          <li>
            <a routerLink="/reporting" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Bar chart icon for Reporting -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-indigo-500" fill="currentColor" viewBox="0 0 24 24">
                <rect x="3" y="13" width="4" height="8" rx="1"/>
                <rect x="9" y="9" width="4" height="12" rx="1"/>
                <rect x="15" y="5" width="4" height="16" rx="1"/>
              </svg>
              <span>Reporting</span>
            </a>
          </li>
        </ng-container>
        <!-- Driver: only Missions and Fuel Consumption -->
        <ng-container *ngIf="user.role === 'driver'">
          <li>
            <a routerLink="/missions" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Clipboard list icon for Missions -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-purple-500" fill="currentColor" viewBox="0 0 24 24">
                <rect x="4" y="4" width="16" height="16" rx="2"/>
                <rect x="8" y="2" width="8" height="4" rx="1"/>
                <rect x="8" y="8" width="8" height="2" rx="1"/>
                <rect x="8" y="12" width="8" height="2" rx="1"/>
                <rect x="8" y="16" width="8" height="2" rx="1"/>
              </svg>
              <span>Missions</span>
            </a>
          </li>
          <li>
            <a routerLink="/fuel" routerLinkActive="bg-red-50 text-red-600 dark:bg-gray-700 dark:text-red-400"
              class="flex items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <!-- Gas pump icon for Fuel Consumption -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-pink-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M16 3v1a1 1 0 001 1h1a1 1 0 011 1v13a2 2 0 01-2 2H6a2 2 0 01-2-2V5a1 1 0 011-1h1a1 1 0 001-1V3m0 0h6m-6 0a1 1 0 00-1 1v1m8-2a1 1 0 011 1v1m-1-2h-6" />
                <rect x="14" y="10" width="4" height="7" rx="1"/>
              </svg>
              <span>Fuel Consumption</span>
            </a>
          </li>
        </ng-container>
      </ng-container>
    </ul>

    <!-- Logout Button at Bottom -->
    <div class="pt-2 mt-2 border-t border-gray-200 dark:border-gray-700">
      <button 
        (click)="logout()" 
        class="flex w-full items-center p-2 text-gray-900 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
        </svg>
        <span>Logout</span>
      </button>
    </div>
  </div>
</aside>